<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="../../../static/css/output.css">
	<title>Document</title>
	<style>
		input[type="number"]::-webkit-inner-spin-button,
		input[type="number"]::-webkit-outer-spin-button {
			appearance: none;
			margin: 0;
		}

		table tbody tr:nth-child(odd) {
			background: #ffffff;
		}

		table tbody tr:nth-child(even) {
			background: #e5e7eb;
		}
	</style>
</head>

<body class="h-screen">
	<main>
		<form method="post" action="{% url 'comparador_pala' %}">
			{% csrf_token %}
			<div class="flex">
				<div class="flex">
					<div class="flex flex-col bg-slate-500 p-2">
						<label for="forma">Forma</label>
						<select name="forma">
							<option value="todas">Todas</option>
							{% for forma in formas %}
							<option value="{{ forma.0 }}" {% if forma.0 == forma_seleccionada %}selected{% endif %}>{{ forma.1 }}
							</option>
							{% endfor %}
						</select>
					</div>
					<div class="flex flex-col bg-slate-500 p-2">
						<label for="dureza">Dureza</label>
						<select name="dureza">
							<option value="todas">Todas</option>
							{% for dureza_opcion in tactos %}
							<option value="{{ dureza_opcion.0 }}" {% if dureza_opcion == dureza_seleccionada %}selected{% endif %}>
								{{ dureza_opcion.1 }}
							</option>
							{% endfor %}
						</select>
					</div>
					<div class="flex flex-col bg-slate-500 p-2">
						<label for="balance">Balance</label>
						<select name="balance">
							<option value="todas">Todas</option>
							{% for balance_opcion in balances %}
							<option value="{{ balance_opcion.0 }}" {% if balance_opcion.0 == balance_seleccionado %}selected{% endif %}>
								{{ balance_opcion.1 }}
							</option>
							{% endfor %}
						</select>
					</div>
				</div>
				<div class="flex flex-col bg-zinc-500 p-2">
					<label for="precio_min">Precio</label>
					<input type="number" name="precio_min" id="precio_min" value="{{ precio_min }}">
					<input type="number" name="precio_max" id="precio_max" value="{{ precio_max }}">
				</div>
				<div class="flex flex-col bg-zinc-500 p-2">
					<label for="potencia">Potencia</label>
					<input type="number" name="potencia_min" id="potencia_min" value="{{ potencia_min }}">
					<input type="number" name="potencia_max" id="potencia_max" value="{{ potencia_max }}">
				</div>
			</div>
			<aside class="float-left bg-gray-700 text-gray-300">
				<!-- Configuración para Bandeja -->
				<div class="flex flex-col border-b-2 border-b-sky-600 box-border">
					<span class="mx-1 text-sm">Bandeja</span>
					<div class="flex flex-col items-center">
						<div class="flex gap-1">
							<span class="text-xs relative bottom-px">min</span>
							<input type="range" id="bandeja_range_min" class="w-32" min="0" max="100">
						</div>
						<div class="flex gap-1">
							<span class="text-xs relative bottom-px">max</span>
							<input type="range" id="bandeja_range_max" class="w-32" min="0" max="100">
						</div>
					</div>
					<div class="mt-2 mb-4 mx-2">
						<input type="number" class="w-20 border border-gray-300 bg-gray-700" name="bandeja_min" id="bandeja_min" value="{{ bandeja_min }}">
						<input type="number" class="w-20 border border-gray-300 bg-gray-700" name="bandeja_max" id="bandeja_max" value="{{ bandeja_max }}">
					</div>
				</div>
				<!-- Configuración para Bajada de Pared -->
				<div class="flex flex-col border-b-2 border-b-sky-600 box-border">
					<span class="mx-1 text-sm">Bajada de Pared</span>
					<div class="flex flex-col items-center">
						<div class="flex gap-1">
							<span class="text-xs relative bottom-px">min</span>
							<input type="range" id="bajada_pared_range_min" class="w-32" min="0" max="100">
						</div>
						<div class="flex gap-1">
							<span class="text-xs relative bottom-px">max</span>
							<input type="range" id="bajada_pared_range_max" class="w-32" min="0" max="100">
						</div>
					</div>
					<div class="mt-2 mb-4 mx-2">
						<input type="number" class="w-20 border border-gray-300 bg-gray-700" name="bajada_pared_min" id="bajada_pared_min" value="{{ bajada_pared_min }}">
						<input type="number" class="w-20 border border-gray-300 bg-gray-700" name="bajada_pared_max" id="bajada_pared_max" value="{{ bajada_pared_max }}">
					</div>
				</div>
				<!-- Configuración para Fondo de Pista -->
				<div class="flex flex-col border-b-2 border-b-sky-600 box-border">
					<span class="mx-1 text-sm">Fondo de Pista</span>
					<div class="flex flex-col items-center">
						<div class="flex gap-1">
							<span class="text-xs relative bottom-px">min</span>
							<input type="range" id="fondo_pista_range_min" class="w-32" min="0" max="100">
						</div>
						<div class="flex gap-1">
							<span class="text-xs relative bottom-px">max</span>
							<input type="range" id="fondo_pista_range_max" class="w-32" min="0" max="100">
						</div>
					</div>
					<div class="mt-2 mb-4 mx-2">
						<input type="number" class="w-20 border border-gray-300 bg-gray-700" name="fondo_pista_min" id="fondo_pista_min" value="{{ fondo_pista_min }}">
						<input type="number" class="w-20 border border-gray-300 bg-gray-700" name="fondo_pista_max" id="fondo_pista_max" value="{{ fondo_pista_max }}">
					</div>
				</div>
				<!-- Configuración para Remate -->
				<div class="flex flex-col border-b-2 border-b-sky-600 box-border">
					<span class="mx-1 text-sm">Remate</span>
					<div class="flex flex-col items-center">
						<div class="flex gap-1">
							<span class="text-xs relative bottom-px">min</span>
							<input type="range" id="remate_range_min" class="w-32" min="0" max="100">
						</div>
						<div class="flex gap-1">
							<span class="text-xs relative bottom-px">max</span>
							<input type="range" id="remate_range_max" class="w-32" min="0" max="100">
						</div>
					</div>
					<div class="mt-2 mb-4 mx-2">
						<input type="number" class="w-20 border border-gray-300 bg-gray-700" name="remate_min" id="remate_min" value="{{ remate_min }}">
						<input type="number" class="w-20 border border-gray-300 bg-gray-700" name="remate_max" id="remate_max" value="{{ remate_max }}">
					</div>
				</div>
				<!-- Configuración para Volea -->
				<div class="flex flex-col">
					<span class="mx-1 text-sm">Volea</span>
					<div class="flex flex-col items-center">
						<div class="flex gap-1">
							<span class="text-xs relative bottom-px">min</span>
							<input type="range" id="volea_range_min" class="w-32" min="0" max="100">
						</div>
						<div class="flex gap-1">
							<span class="text-xs relative bottom-px">max</span>
							<input type="range" id="volea_range_max" class="w-32" min="0" max="100">
						</div>
					</div>
					<div class="mt-1.5 mb-4 mx-2">
						<input type="number" class="w-20 border border-gray-300 bg-gray-700" name="volea_min" id="volea_min" value="{{ volea_min }}">
						<input type="number" class="w-20 border border-gray-300 bg-gray-700" name="volea_max" id="volea_max" value="{{ volea_max }}">
					</div>
				</div>
				<div>
					<button type="submit" class="transition-all w-full font-medium hover:bg-gray-600">Aplicar Filtros</button>
				</div>
			</aside>
		</form>

		{% if palas %}
			<div class="relative overflow-x-auto">
				<table class="w-full text-sm text-left rtl:text-right">
					<thead class="text-sm text-gray-900 bg-gray-200">
						<tr class="text-center">
							<th scope="col" class="px-6 py-2">Imagen</th>
							<th scope="col" class="px-6 py-2">Temporada</th>
							<th scope="col" class="px-6 py-2">Marca</th>
							<th scope="col" class="px-6 py-2">Nombre</th>
							<th scope="col" class="px-6 py-2">Peso</th>
							<th scope="col" class="px-6 py-2">Manejabilidad</th>
							<th scope="col" class="px-6 py-2">Punto Dulce</th>
							<th scope="col" class="px-6 py-2">Salida Bola</th>
							<th scope="col" class="px-6 py-2">Defensa</th>
							<th scope="col" class="px-6 py-2">Ataque</th>
							<th scope="col" class="px-6 py-2">Puntuación Total</th>
						</tr>
					</thead>
					<tbody class="text-center">
						{% for pala in palas %}
							<tr class="bg-white border-b">
								{% if pala.imagen %}
									<td>
										<img src="{{ pala.imagen.url }}" alt="{{ pala.nombre }}">
									</td>
								{% else %}
									<td>
										<img src="palas/No-image-found.jpg" alt="{{ pala.nombre }}">
									</td>
								{% endif %}
								<td class="px-6 py-2 whitespace-nowrap">{{ pala.temporada }}</td>
								<td class="px-6 py-2 whitespace-nowrap">{{ pala.marca }}</td>
								<td class="px-6 py-2 whitespace-nowrap">{{ pala.nombre }}</td>
								<td class="px-6 py-2 whitespace-nowrap">{{ pala.peso }}</td>
								<td class="px-6 py-2 whitespace-nowrap">{{ pala.manejabilidad }}</td>
								<td class="px-6 py-2 whitespace-nowrap">{{ pala.punto_dulce }}</td>
								<td class="px-6 py-2 whitespace-nowrap">{{ pala.salida_bola }}</td>
								<td class="px-6 py-2 whitespace-nowrap">{{ pala.defensa }}</td>
								<td class="px-6 py-2 whitespace-nowrap">{{ pala.ataque }}</td>
								<td class="px-6 py-2 whitespace-nowrap">{{ pala.puntuacion_total }}</td>
							</tr>
						{% endfor %}
					</tbody>
				</table>
			</div>
		{% else %}
			<p>No se encontraron palas que coincidan con los filtros.</p>
		{% endif %}
	</main>
	<script>
		// Function to handle range and number input synchronization
		function setupInputSynchronization(rangeIdMin, rangeIdMax, inputIdMin, inputIdMax) {
			let rangeMin = document.getElementById(rangeIdMin);
			let rangeMax = document.getElementById(rangeIdMax);
			let inputMin = document.getElementById(inputIdMin);
			let inputMax = document.getElementById(inputIdMax);

			rangeMin.addEventListener('input', () => {
				inputMin.value = rangeMin.value;
			});

			rangeMax.addEventListener('input', () => {
				inputMax.value = rangeMax.value;
			});

			inputMin.addEventListener('input', () => {
				rangeMin.value = inputMin.value;
			});

			inputMax.addEventListener('input', () => {
				rangeMax.value = inputMax.value;
			});
		}

		// Call the function for each configuration
		setupInputSynchronization('bandeja_range_min', 'bandeja_range_max', 'bandeja_min', 'bandeja_max');
		setupInputSynchronization('bajada_pared_range_min', 'bajada_pared_range_max', 'bajada_pared_min', 'bajada_pared_max');
		setupInputSynchronization('fondo_pista_range_min', 'fondo_pista_range_max', 'fondo_pista_min', 'fondo_pista_max');
		setupInputSynchronization('remate_range_min', 'remate_range_max', 'remate_min', 'remate_max');
		setupInputSynchronization('volea_range_min', 'volea_range_max', 'volea_min', 'volea_max');
	</script>	
</body>

</html>