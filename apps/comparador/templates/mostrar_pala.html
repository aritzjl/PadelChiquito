{% load static %}

<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href='{% static "css/output.css" %}'>
  <meta name="description" content="Padel Chiquito: Tu destino principal para comparar y encontrar las mejores palas de pádel. Explora una amplia gama de marcas y modelos para mejorar tu juego.">
  <meta name="keywords" content="Padel Chiquito, palas de pádel, comparador de palas, mejores palas de pádel, marcas de palas, potencia, manejo, comparativas de palas">
  <!-- Favicon -->
  <link rel="apple-touch-icon" sizes="180x180" href='{% static "img/favicon/apple-touch-icon.png" %}'>
  <link rel="icon" type="image/png" sizes="32x32" href='{% static "img/favicon/favicon-32x32.png" %}'>
  <link rel="icon" type="image/png" sizes="16x16" href='{% static "img/favicon/favicon-16x16.png" %}'>
  <!-- JSON-LD -->
  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Product",
      "name": "Padel Chiquito",
      "description": "Tu destino principal para comparar y encontrar las mejores palas de pádel. Explora una amplia gama de marcas y modelos para mejorar tu juego.",
      "brand": {
        "@type": "Brand",
        "name": "Padel Chiquito"
      },
      "image": "{{ pala.image.url }}",
      "offers": {
        "@type": "Offer",
        "priceCurrency": "EUR",
        "price": {{ pala.precio }},
        "availability": "http://schema.org/InStock",
      }
    }
  </script>
  <title>Padel Chiquito</title>
</head>

<body class="flex flex-col h-screen">
  {% include "header.html" %}
  <main class="flex flex-col px-4 py-4 gap-y-12 sm:px-8 md:px-10 lg:px-36">
    <article class="flex flex-col justify-center mb-2 md:flex-row gap-x-10 gap-y-6">
      <div class="flex min-w-[14rem] self-center md:self-auto w-56 min-h-[18rem] max-h-72">
        <!-- ! Necesito que pongas una URL dinamica aqui - la mama de la mama de la mama -->
        <img class="w-full min-h-0" width="224" height="288" src="https://padelzoom.es/wp-content/themes/busolightning/images/palas-imagenes/Nox/nox-at10-luxury-genius-arena-2023.jpg" alt="{{ pala.nombre }}">
      </div>
      <section class="flex flex-col sm:flex-row gap-x-10 gap-y-6">
        <div class="flex flex-col gap-y-4">
          <h1 class="text-3xl font-bold text-gray-600 first-letter:uppercase">{{ pala.nombre }}</h1>
          <div class="text-xl text-gray-500 truncate lg:text-lg">
            <p><strong class="font-semibold text-gray-600">Temporada:</strong> {{ pala.temporada }}</p>
            <p><strong class="font-semibold text-gray-600">Material del marco:</strong> {{ pala.material_marco }} </p>
            <p><strong class="font-semibold text-gray-600">Material del plano:</strong> {{ pala.material_plano }} </p>
            <p><strong class="font-semibold text-gray-600">Material de la goma:</strong> {{ pala.material_goma }}</p>
            <p><strong class="font-semibold text-gray-600">Tacto:</strong> {{ pala.get_tacto_display }}</p>
            <p><strong class="font-semibold text-gray-600">Forma:</strong> {{ pala.get_forma_display }}</p>
            <p><strong class="font-semibold text-gray-600">Peso:</strong> {{ pala.peso }}</p>
            <p><strong class="font-semibold text-gray-600">Balance:</strong> {{ pala.get_balance_display }}</p>
          </div>
        </div>
        <div class="p-4 sm:p-10 md:p-6 lg:p-10 text-center bg-[#ccff00] rounded-xl h-fit">
          <span class="text-lg">Mejor precio</span>
          <div class="flex flex-col justify-center">
            <span class="text-lg line-through">{{ pala.precio }}</span>
            <span class="text-2xl">{{ pala.precio_rebaja }}&euro;</span>
          </div>
        </div>
      </section>
    </article>
    <section class="flex flex-col w-full gap-y-2">
      <h2 class="text-3xl font-bold text-gray-700">Puntuación</h2>
      <div class="grid w-full sm:grid-cols-3 md:grid-cols-4 gap-x-6">
        <div class="w-full">
          <input id="palaControl" type="hidden" name="palaControlInput" value="{{ pala.control }}">
          <span>Control: {{ pala.control }}</span>
          <div class="w-full h-3 bg-gray-400 rounded-full">
            <div id="palaControlBarra" class="bg-[#ffff00] h-3 rounded-full"></div>
          </div>
        </div>
        <div class="w-full">
          <input id="palaPotencia" type="hidden" name="palaPotenciaInput" value="{{ pala.potencia }}">
          <span>Potencia: {{ pala.potencia }}</span>
          <div class="w-full h-3 bg-gray-400 rounded-full">
            <div id="palaPotenciaBarra" class="bg-[#ffff00] h-3 rounded-full"></div>
          </div>
        </div>
        <div>
          <input id="palaDefensa" type="hidden" name="palaDefensaInput" value="{{ pala.defensa }}">
          <span>Defensa: {{ pala.defensa }}</span>
          <div class="w-full h-3 bg-gray-400 rounded-full">
            <div id="palaDefensaBarra" class="bg-[#ffff00] h-3 rounded-full"></div>
          </div>
        </div>
        <div>
          <input id="palaAtaque" type="hidden" name="palaAtaqueInput" value="{{ pala.ataque }}">
          <span>Ataque: {{ pala.ataque }}</span>
          <div class="w-full h-3 bg-gray-400 rounded-full">
            <div id="palaAtaqueBarra" class="bg-[#ffff00] h-3 rounded-full"></div>
          </div>
        </div>
        <div class="w-full">
          <input id="palaManejabilidad" type="hidden" name="palaManejabilidadInput" value="{{ pala.manejabilidad }}">
          <span>Manejabilidad: {{ pala.manejabilidad }}</span>
          <div class="w-full h-3 bg-gray-400 rounded-full">
            <div id="palaManejabilidadBarra" class="bg-[#ccff00] h-3 rounded-full"></div>
          </div>
        </div>
        <div>
          <input id="palaRemate" type="hidden" name="palaRemateInput" value="{{ pala.remate }}">
          <span>Remate: {{ pala.remate }}</span>
          <div class="w-full h-3 bg-gray-400 rounded-full">
            <div id="palaRemateBarra" class="bg-[#ccff00] h-3 rounded-full"></div>
          </div>
        </div>
        <div class="w-full">
          <input id="palaSalidaBola" type="hidden" name="palaSalidaBolaInput" value="{{ pala.salida_bola }}">
          <span>Salida de bola: {{ pala.salida_bola }}</span>
          <div class="w-full h-3 bg-gray-400 rounded-full">
            <div id="palaSalidaBolaBarra" class="bg-[#ccff00] h-3 rounded-full"></div>
          </div>
        </div>
        <div class="w-full">
          <input id="palaVolea" type="hidden" name="palaVoleaInput" value="{{ pala.volea }}">
          <span>Volea: {{ pala.volea }}</span>
          <div class="w-full h-3 bg-gray-400 rounded-full">
            <div id="palaVoleaBarra" class="bg-[#ccff00] h-3 rounded-full"></div>
          </div>
        </div>
        <div class="w-full">
          <input id="palaPuntoDulce" type="hidden" name="palaPuntoDulceInput" value="{{ pala.punto_dulce }}">
          <span>Punto dulce: {{ pala.punto_dulce }}</span>
          <div class="w-full h-3 bg-gray-400 rounded-full">
            <div id="palaPuntoDulceBarra" class="bg-[#ccff00] h-3 rounded-full"></div>
          </div>
        </div>
        <div class="w-full">
          <input id="palaBajadaPared" type="hidden" name="palaBajadaParedInput" value="{{ pala.bajada_de_pared }}">
          <span>Bajada: {{ pala.bajada_de_pared }}</span>
          <div class="w-full h-3 bg-gray-400 rounded-full">
            <div id="palaBajadaParedBarra" class="bg-[#ccff00] h-3 rounded-full"></div>
          </div>
        </div>
        <div class="w-full">
          <input id="palaFondoPista" type="hidden" name="palaFondoPistaInput" value="{{ pala.fondo_de_pista }}">
          <span>Fondo de pista: {{ pala.fondo_de_pista }}</span>
          <div class="w-full h-3 bg-gray-400 rounded-full">
            <div id="palaFondoPistaBarra" class="bg-[#ccff00] h-3 rounded-full"></div>
          </div>
        </div>
        <div class="w-full">
          <input id="palaBandeja" type="hidden" name="palaBandejaInput" value="{{ pala.bandeja }}">
          <span>Bandeja: {{ pala.bandeja }}</span>
          <div class="w-full h-3 bg-gray-400 rounded-full">
            <div id="palaBandejaBarra" class="bg-[#ccff00] h-3 rounded-full"></div>
          </div>
        </div>
      </div>
      <div>
        <input id="palaPuntuacionTotal" type="hidden" name="palaPuntuacionTotalInput" value="{{ pala.puntuacion_total }}">
        <span class="text-lg font-medium text-gray-700">Puntuación total: {{ pala.puntuacion_total }}</span>
        <div class="w-full h-4 bg-gray-400 rounded-full">
          <div id="palaPuntuacionTotalBarra" class="h-4 bg-gray-800 rounded-full"></div>
        </div>
      </div>
    </section>
  
    <!-- ! Esta mierda no tiene ni pies ni cabeza -->
    <!-- Sección para valoraciones -->
    <!-- <section class="p-2 bg-red-100">
      <h2>Valoraciones de "{{ pala.nombre }}"</h2>
      {% if ha_valorado %}
        <p>Valoración media: {% if valoracion_media %}{{ valoracion_media }}{% else %}No hay valoraciones aún{% endif %}</p>
      {% else %}
        <form action="{% url 'valorar_pala' pala.pk %}" method="post">
          {% csrf_token %}
          <input type="number" name="valoracion" min="1" max="5">
          <input type="submit" value="Valorar">
        </form>
      {% endif %}
    </section> -->
    
    <section class="flex flex-col w-full text-gray-700 gap-y-8">
      <h2 class="text-3xl font-bold text-center">Tiendas y precios más recientes</h2>
      <div class="grid grid-cols-1 gap-4 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4">
        {% for precio in precios_mas_recientes %}
          <a href="#" class="flex flex-col justify-around p-4 text-center transition-transform bg-gray-100 rounded-lg h-80 gap-y-6 hover:scale-105">
            <div class="w-40 h-20 mx-auto">
              <!-- ! Necesito que pongas una URL dinamica aqui -->
              <img src="https://th.bing.com/th/id/R.d0a6b0bfd5d6509c1872d41bbc67d5a1?rik=10BHyoARunZ0eg&riu=http%3a%2f%2fwww.padelspain.net%2fuserfiles%2fLogo-Padel-Iberico-comunicado-oficial-dentro.jpg&ehk=EcU9c8kDMVrv4bgM6P6o0rut60KNeLQWHb1lKXTVexw%3d&risl=&pid=ImgRaw&r=0" class="w-full h-full" width="160" height="80" alt="{{ precio.tienda.nombre }} logo">
            </div>
            <div class="flex flex-col mb-8 sm:mb-4">
              <span class="mb-1 text-xl font-bold">{{ precio.tienda.nombre }}</span>
              <span class="text-lg">{{ precio.precio }} &euro;</span>
            </div>
            {% if precio.tienda.codigo_promocional %}
              <div class="flex flex-col gap-y-1">
                <span class="text-sm text-gray-800">Código promocional: {{ precio.tienda.codigo_promocional }}</span>
                <!-- ! Necesito que pongas una URL dinamica aqui -->
                <span class="text-sm text-gray-800">Descuento: 29.43%</span>
              </div>
            {% else %}
              <span class="text-sm text-gray-800 uppercase">No tiene código promocional</span>
            {% endif %}
          </a>
        {% endfor %}
      </div>
    </section>
  
    <!-- Sección de historial de precios con la gráfica generada por matplotlib -->
    <section class="flex flex-col items-center justify-center w-full p-2 gap-y-8">
      <h2 class="text-3xl font-bold text-center text-gray-700">Historial de precios</h2>
      <img src="data:image/png;base64,{{ grafica_base64 }}" width="800" height="600" alt="Gráfica de historial de precios">
    </section>
  
    <!-- Sección de palas similares -->
    <section class="flex flex-col w-full text-gray-700 gap-y-8">
      <h2 class="text-3xl font-bold text-center">Palas similares</h2>
      <div class="grid grid-cols-1 gap-4 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4">
        {% for pala_similar in palas_similares %}
          <a href="{% url 'mostrar_pala' pala_similar.pk %}" class="flex flex-col items-center p-4 text-center transition-transform rounded bg-[#fafafa] h-80 hover:scale-105">
            <div class="w-40 h-40 mb-2 overflow-hidden bg-white rounded-full">
              <!-- ! Necesito que pongas una URL dinamica aqui -->
              <img src="https://padelzoom.es/wp-content/themes/busolightning/images/palas-imagenes/Nox/nox-at10-luxury-genius-arena-2023.jpg" alt="{{ pala_similar.nombre }}" class="object-cover w-full">
            </div>
            <span class="text-xl font-bold">{{ pala_similar.nombre }}</span>
            <span class="text-sm text-gray-500">Marca: {{ pala_similar.marca }}</span>
          </a>
        {% empty %}
          <span>No se encontraron palas similares.</span>
        {% endfor %}
      </div>
    </section>    
  
    <!-- Sección de reviews -->
    <section class="p-2 bg-purple-100">
      <h2>Reviews de la pala "{{ pala.nombre }}"</h2>
      <ul>
        {% for review in reviews %}
          <li>
            <p>Título: {{ review.titulo }}</p>
            <a href="{{ review.video_url }}">
              {% if review.plataforma == 'INSTA' %}
                <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/e/e7/Instagram_logo_2016.svg/2048px-Instagram_logo_2016.svg.png" alt="Instagram" width="50" height="50">
              {% elif review.plataforma == 'TIKTOK' %}
                <img src="https://static.vecteezy.com/system/resources/previews/023/986/921/non_2x/tiktok-logo-tiktok-logo-transparent-tiktok-icon-transparent-free-free-png.png" alt="TikTok" width="50" height="50">
              {% elif review.plataforma == 'YOUTUBE' %}
                <img src="https://upload.wikimedia.org/wikipedia/commons/e/ef/Youtube_logo.png" alt="YouTube" width="50" height="50">
              {% endif %}
            </a>
            <p>Plataforma: {{ review.get_plataforma_display }}</p>
            <p>Fecha: {{ review.fecha }}</p>
          </li>
          {% empty %}
          <li>No hay reviews para esta pala.</li>
        {% endfor %}
      </ul>
    </section>
  
    <!-- Sección de comentarios -->
    <section class="p-2 bg-orange-100">
      <section>
        <h2>Agregar Comentario</h2>
        <form method="post" action="{% url 'comentar_pala' pala.pk %}">
          {% csrf_token %}
          <label for="comment">Comentar</label>
          <textarea id="comment" name="contenido" rows="4" cols="20"></textarea>
          <br>
          <input type="submit" value="Agregar Comentario">
        </form>
      </section>
      <section>
        <h2>Comentarios</h2>
        <ul>
          {% for comentario in comentarios %}
            <li>{{ comentario.usuario.username }} - {{ comentario.fecha }}: {{ comentario.contenido }}</li>
            {% empty %}
            <li>No hay comentarios aún.</li>
          {% endfor %}
        </ul>
      </section>
    </section>
  </main>
  {% include "footer.html" %}
  <script src="{% static 'js/comparador/mostrarPala.js' %}"></script>
</body>

</html>